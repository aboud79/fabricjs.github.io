"use strict";(self.webpackChunkfabric_gatsby5=self.webpackChunkfabric_gatsby5||[]).push([[269],{5049:function(n,e,t){t.r(e),t.d(e,{default:function(){return d}});var a=t(1151),r=t(7294),c=t(8948);const i="\nconst canvas = new fabric.Canvas(canvasEl);\n\nfabric.Object.ownDefaults.transparentCorners = false;\n\nconst rect1 = new fabric.Rect({\n  width: 200,\n  height: 100,\n  left: 0,\n  top: 50,\n  angle: 30,\n  fill: 'rgba(255,0,0,0.5)',\n});\n\nconst rect2 = new fabric.Rect({\n  width: 100,\n  height: 100,\n  left: 350,\n  top: 250,\n  angle: -10,\n  fill: 'rgba(0,200,0,0.5)',\n});\n\nconst rect3 = new fabric.Rect({\n  width: 50,\n  height: 100,\n  left: 275,\n  top: 350,\n  angle: 45,\n  stroke: '#eee',\n  strokeWidth: 10,\n  fill: 'rgba(0,0,200,0.5)',\n});\n\nconst circle = new fabric.Circle({\n  radius: 50,\n  left: 275,\n  top: 75,\n  fill: '#aac',\n});\n\nconst triangle = new fabric.Triangle({\n  width: 100,\n  height: 100,\n  left: 50,\n  top: 300,\n  fill: '#cca',\n});\n\ncanvas.add(rect1, rect2, rect3, circle, triangle);\ncanvas.on({\n  'object:moving': onChange,\n  'object:scaling': onChange,\n  'object:rotating': onChange,\n  'object:skewing': onChange,\n});\n\nconst hit = new fabric.Circle({\n  radius: 5,\n  originX: 'center',\n  originY: 'center',\n  opacity: 0.5,\n});\n\nfunction onChange({ target }) {\n  target.setCoords();\n  const ctx = canvas.getTopContext();\n  canvas.clearContext(ctx);\n  canvas.forEachObject((obj) => {\n    if (obj === target) {\n      obj.set('opacity', 1);\n      return;\n    }\n    const intersection = fabric.Intersection.intersectPolygonPolygon(\n      target.getCoords(true),\n      obj.getCoords(true)\n    );\n\n    hit.set({ fill: obj.fill });\n    if (\n      intersection.status === 'Intersection' ||\n      intersection.status === 'Coincident' ||\n      obj.isContainedWithinObject(target, true) ||\n      target.isContainedWithinObject(obj, true)\n    ) {\n      obj.set('opacity', 0.5);\n      ctx.save();\n      ctx.transform(...canvas.viewportTransform);\n      hit.transform(ctx);\n      intersection.points.forEach(({ x, y }) => {\n        ctx.save();\n        ctx.translate(x, y);\n        hit._render(ctx);\n        ctx.restore();\n      });\n      ctx.restore();\n    } else {\n      obj.set('opacity', 1);\n    }\n  });\n}\n";function o(n){return r.createElement(r.Fragment,null,r.createElement("p",null,"Intersection is checked against ",r.createElement("b",null,"bounding boxes"),", not actual shapes"),"\n",r.createElement(c.p,{code:i,canvasId:"canvas"},r.createElement("canvas",{id:"canvas",width:"500",height:"500"})))}var l=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,a.ah)(),n.components);return e?r.createElement(e,n,r.createElement(o,n)):o()},s=t(4160),b=t(6422),g=t(1202),f=t(6330),h=t(2059);function u(n){let{data:e,pageContext:t,children:a}=n;const{frontmatter:c,mdFile:i}=e.demoPage;return r.createElement(b.Z,null,r.createElement(h.Z,{title:c.title}),r.createElement("nav",{id:"breadcrumb-nav","aria-label":"breadcrumb"},r.createElement(s.rU,{to:"/demos"},"Demos")," > ",r.createElement("span",null,c.title)),r.createElement("h1",null,c.title),r.createElement("article",null,a),r.createElement(g.Z,{relativePath:i.relativePath}),r.createElement(f.Z,{prev:t.prev||{title:"All FabricJS demos",slug:"/demos"},next:t.next}))}function d(n){return r.createElement(u,n,r.createElement(l,n))}}}]);
//# sourceMappingURL=component---src-templates-demo-jsx-content-file-path-src-content-demo-intersection-index-md-6b3b59ab84723532262a.js.map