"use strict";(self.webpackChunkfabric_gatsby5=self.webpackChunkfabric_gatsby5||[]).push([[643],{866:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var o=n(1151),a=n(7294),l=n(8948);const s="\n  const urlMap = {\n    VT323:\n      'url(https://fonts.gstatic.com/s/vt323/v17/pxiKyp0ihIEF2isfFJXUdVNF.woff2)',\n    Pacifico:\n      'url(https://fonts.gstatic.com/s/pacifico/v22/FwZY7-Qmy14u9lezJ-6H6MmBp0u-.woff2)',\n    Lato100:\n      'url(https://fonts.gstatic.com/s/lato/v24/S6u8w4BMUTPHh30AXC-qNiXg7Q.woff2)',\n    Lato900:\n      'url(https://fonts.gstatic.com/s/lato/v24/S6u9w4BMUTPHh50XSwiPGQ3q5d0.woff2)',\n  };\n  const canvas = new fabric.Canvas(canvasEl);\n  // correctly instantiate new Fontfaces\n  const fontVT323 = new FontFace('VT323', urlMap.VT323, {\n    style: 'normal',\n    weight: 'normal',\n  });\n  const fontPacifico = new FontFace('Pacifico', urlMap.Pacifico, {\n    style: 'normal',\n    weight: 'normal',\n  });\n\n  const Lato100 = new FontFace('Lato', urlMap.Lato100, {\n    style: 'normal',\n    weight: '100',\n  });\n\n  const Lato900 = new FontFace('Lato', urlMap.Lato900, {\n    style: 'normal',\n    weight: '900',\n  });\n  // wait for them to load\n  Promise.all([\n    fontVT323.load(),\n    fontPacifico.load(),\n    Lato100.load(),\n    Lato900.load(),\n  ]).then(() => {\n    // add the css to the document for those loaded fonts\n    document.fonts.add(fontPacifico);\n    document.fonts.add(fontVT323);\n    document.fonts.add(Lato100);\n    document.fonts.add(Lato900);\n    // create the textboxes\n    const pacifico = new fabric.Textbox('Correctly loaded Pacifico', {\n      left: 50,\n      top: 10,\n      width: 200,\n      fontSize: 60,\n      fontFamily: 'Pacifico',\n    });\n    const vt323 = new fabric.Textbox('Correctly loaded Pacifico', {\n      left: 350,\n      top: 10,\n      width: 200,\n      fontSize: 60,\n      fontFamily: 'VT323',\n    });\n    const lato100 = new fabric.Textbox('Correctly loaded lato100', {\n      left: 350,\n      top: 310,\n      width: 200,\n      fontSize: 60,\n      fontWeight: '100',\n      fontFamily: 'Lato',\n    });\n    const lato900 = new fabric.Textbox('Correctly loaded lato900', {\n      left: 50,\n      top: 310,\n      width: 200,\n      fontSize: 60,\n      fontWeight: '900',\n      fontFamily: 'Lato',\n    });\n    canvas.add(pacifico, vt323, lato100, lato900);\n  });\n";function c(e){const t=Object.assign({p:"p",a:"a",strong:"strong",span:"span"},(0,o.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(t.p,null,"When working with custom fonts on a fabric canvas, it is recommended to\nuse the ",a.createElement(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/CSS_Font_Loading_API"},"CSS Font loader api"),".\nNot doing so will make your app do FOUT(s) (Flash of Unstyled Text).\nThis happens because font loading involve network and is async by nature, and so when you will be adding a text object with a custom font, or switching font, the canvas will try to render before the font has been actually loaded and so the browser will fallback on the specified fallback font or the default one."),"\n",a.createElement(t.p,null,"If for some reason your target browsers do not support that api yet you can pick from a selection of font preloading libraries like ",a.createElement(t.a,{href:"https://github.com/bramstein/fontfaceobserver"},"Font Face Observer")),"\n",a.createElement(t.p,null,"In this example we are using the browser native CSS Font loader api to load 2 google fonts from google's cdn.\nWe load the font, then we create a textbox and then use the loaded font family. Note that you could create the textbox, add them to canvas and just re-render when the font is loaded, doing so you would have saved in FabricJS cache some values calculated with the font not correctly loaded and likely ",a.createElement(t.strong,null,"have cursor positioning issues")," or ",a.createElement(t.strong,null,"wrong bounding boxes issues"),". Always assign the font family after the font has correctly loaded."),"\n",a.createElement(t.p,null,"When dealing with fonts with multiple weights and styles is easier to assign a different font family to each of them and just use different font families, in the example's code we do show how to load different weights with the same family name, but be aware that one font file has one family, one weight and one style. Loading the font ",a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Lato</code>'}})," doesn't grant you access to all variants of the fonts, but just one. there is one file per variant."),"\n","\n",a.createElement(l.p,{code:s,canvasId:"c"},a.createElement("canvas",{width:"600",height:"600",id:"c"})))}var i=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,o.ah)(),e.components);return t?a.createElement(t,e,a.createElement(c,e)):c(e)},r=n(4160),f=n(6422),d=n(1202),h=n(6330),m=n(2059);function u(e){let{data:t,pageContext:n,children:o}=e;const{frontmatter:l,mdFile:s}=t.demoPage;return a.createElement(f.Z,null,a.createElement(m.Z,{title:l.title}),a.createElement("nav",{id:"breadcrumb-nav","aria-label":"breadcrumb"},a.createElement(r.rU,{to:"/demos"},"Demos")," > ",a.createElement("span",null,l.title)),a.createElement("h1",null,l.title),a.createElement("article",null,o),a.createElement(d.Z,{relativePath:s.relativePath}),a.createElement(h.Z,{prev:n.prev||{title:"All FabricJS demos",slug:"/demos"},next:n.next}))}function w(e){return a.createElement(u,e,a.createElement(i,e))}}}]);
//# sourceMappingURL=component---src-templates-demo-jsx-content-file-path-src-content-demo-loading-custom-fonts-index-md-3367484756064cf71318.js.map