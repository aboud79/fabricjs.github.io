{"componentChunkName":"component---src-templates-demo-jsx","path":"/demo/loading-custom-fonts/","result":{"data":{"demoPage":{"html":"<div\r\n  class=\"codepen-later\"\r\n  data-editable=\"true\"\r\n  data-height=\"500\"\r\n  data-default-tab=\"result\"\r\n  data-prefill='{\r\n    \"scripts\": [\"https://unpkg.com/fabric@4.0.0-beta.12/dist/fabric.js\", \"http://rawgit.com/bramstein/fontfaceobserver/master/fontfaceobserver.js\"]\r\n  }'\r\n>\r\n<pre data-lang=\"css\" data-options-autoprefixer=\"true\">\r\n.controls {\r\n\tdisplay: inline-block;\r\n}\r\ncanvas {\r\n  border: 1px solid #999;\r\n}\r\n</pre>\r\n<pre data-lang=\"html\">\r\n  <canvas id=\"c\" width=\"500\" height=\"500\" style=\"border:1px solid #ccc\"></canvas>\r\n  <div class=\"controls\">\r\n    <p>\r\n      Font-family: <select id=\"font-family\"></select>\r\n    </p>\r\n  </div>\r\n</pre>\r\n<pre data-lang=\"js\">\r\n/*\r\nWhen working with custom fonts on a fabric canvas, it is recommended to\r\nuse a font preloader. Not doing so is likely to cause texts that are\r\nimported onto the canvas to be rendered with a wrong (default) font. It\r\ncan also cause you to see a FOUT (Flash of Unstyled Text) right after\r\nchanging the font of a text. The reason behind this is that the browser\r\nwill only load a font after it is used in the DOM. Preloading fonts\r\nprevents this from happening. In this example we are using Font Face\r\nObserver (https://github.com/bramstein/fontfaceobserver) to preload\r\nGoogle Fonts, using the following steps:\r\n- Add the custom fonts using @import in your CSS\r\n- Make an array containing the names of all the custom fonts\r\n- Load all the custom fonts using a promise or load them by request\r\n- When the promise is fulfilled, initialize the fabric canvas\r\n*/\n<p>var canvas = new fabric.Canvas('c');\r\n// Define an array with all fonts\r\nvar fonts = [\"Pacifico\", \"VT323\", \"Quicksand\", \"Inconsolata\"];</p>\n<p>var textbox = new fabric.Textbox('Lorum ipsum dolor sit amet', {\r\nleft: 50,\r\ntop: 50,\r\nwidth: 150,\r\nfontSize: 20\r\n});\r\ncanvas.add(textbox).setActiveObject(textbox);\r\nfonts.unshift('Times New Roman');\r\n// Populate the fontFamily select\r\nvar select = document.getElementById(\"font-family\");\r\nfonts.forEach(function(font) {\r\nvar option = document.createElement('option');\r\noption.innerHTML = font;\r\noption.value = font;\r\nselect.appendChild(option);\r\n});</p>\n<p>// Apply selected font on change\r\ndocument.getElementById('font-family').onchange = function() {\r\nif (this.value !== 'Times New Roman') {\r\nloadAndUse(this.value);\r\n} else {\r\ncanvas.getActiveObject().set(\"fontFamily\", this.value);\r\ncanvas.requestRenderAll();\r\n}\r\n};</p>\n<p>function loadAndUse(font) {\r\nvar myfont = new FontFaceObserver(font)\r\nmyfont.load()\r\n.then(function() {\r\n// when font is loaded, use it.\r\ncanvas.getActiveObject().set(\"fontFamily\", font);\r\ncanvas.requestRenderAll();\r\n}).catch(function(e) {\r\nconsole.log(e)\r\nalert('font loading failed ' + font);\r\n});\r\n}</p>\n<p>// Load all fonts using Font Face Observer\r\n</pre></p>\n</div>","frontmatter":{"title":"Loading custom font"},"mdFile":{"relativePath":"demo/loading-custom-fonts/index.md"}}},"pageContext":{"title":"Loading custom font","slug":"/demo/loading-custom-fonts","prev":{"title":"Intersection","slug":"/demo/intersection"},"next":{"title":"Manage selection","slug":"/demo/manage-selection"}}},"staticQueryHashes":["2748212769"],"slicesMap":{}}