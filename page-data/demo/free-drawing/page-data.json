{"componentChunkName":"component---src-templates-demo-jsx","path":"/demo/free-drawing/","result":{"data":{"demoPage":{"html":"<div\r\n  class=\"codepen-later\"\r\n  data-editable=\"true\"\r\n  data-height=\"500\"\r\n  data-default-tab=\"result\"\r\n  data-prefill='{\r\n    \"scripts\": [\"https://unpkg.com/fabric@4.0.0-rc.1/dist/fabric.js\"]\r\n  }'\r\n>\r\n<pre data-lang=\"css\" data-options-autoprefixer=\"true\">\r\n#drawing-mode {\r\n  margin-bottom: 10px;\r\n  vertical-align: top;\r\n}\r\n#drawing-mode-options {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  margin-bottom: 10px;\r\n  margin-top: 10px;\r\n  background: #f5f2f0;\r\n  padding: 10px;\r\n}\r\nlabel {\r\n  display: inline-block; width: 130px;\r\n}\r\n.info {\r\n  display: inline-block;\r\n  width: 25px;\r\n  background: #ffc;\r\n}\r\n#bd-wrapper {\r\n  min-width: 1500px;\r\n}\r\n</pre>\r\n<pre data-lang=\"html\">\r\n  <canvas id=\"c\" width=\"500\" height=\"500\" style=\"border:1px solid #aaa\"></canvas>\r\n  <div style=\"display: inline-block; margin-left: 10px\">\r\n    <button id=\"drawing-mode\" class=\"btn btn-info\">Cancel drawing mode</button><br>\r\n    <button id=\"clear-canvas\" class=\"btn btn-info\">Clear</button><br>\r\n    <div id=\"drawing-mode-options\">\r\n      <label for=\"drawing-mode-selector\">Mode:</label>\r\n      <select id=\"drawing-mode-selector\">\r\n        <option>Pencil</option>\r\n        <option>Circle</option>\r\n        <option>Spray</option>\r\n        <option>Pattern</option>\r\n        <option>hline</option>\r\n        <option>vline</option>\r\n        <option>square</option>\r\n        <option>diamond</option>\r\n        <option>texture</option>\r\n      </select><br>\r\n      <label for=\"drawing-line-width\">Line width:</label>\r\n      <span class=\"info\">30</span><input type=\"range\" value=\"30\" min=\"0\" max=\"150\" id=\"drawing-line-width\"><br>\r\n      <label for=\"drawing-color\">Line color:</label>\r\n      <input type=\"color\" value=\"#005E7A\" id=\"drawing-color\"><br>\r\n      <label for=\"drawing-shadow-color\">Shadow color:</label>\r\n      <input type=\"color\" value=\"#005E7A\" id=\"drawing-shadow-color\"><br>\r\n      <label for=\"drawing-shadow-width\">Shadow width:</label>\r\n      <span class=\"info\">0</span><input type=\"range\" value=\"0\" min=\"0\" max=\"50\" id=\"drawing-shadow-width\"><br>\r\n      <label for=\"drawing-shadow-offset\">Shadow offset:</label>\r\n      <span class=\"info\">0</span><input type=\"range\" value=\"0\" min=\"0\" max=\"50\" id=\"drawing-shadow-offset\"><br>\r\n    </div>\r\n  </div>\r\n</pre>\r\n<pre data-lang=\"js\">\r\n(function() {\r\n\tvar $ = function(id) {\r\n\t\treturn document.getElementById(id)\r\n\t};\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var canvas = this.__canvas = new fabric.Canvas('c', {\r\n\tisDrawingMode: true\r\n});\r\n\r\nfabric.Object.prototype.transparentCorners = false;\r\n\r\nvar drawingModeEl = $('drawing-mode'),\r\n\tdrawingOptionsEl = $('drawing-mode-options'),\r\n\tdrawingColorEl = $('drawing-color'),\r\n\tdrawingShadowColorEl = $('drawing-shadow-color'),\r\n\tdrawingLineWidthEl = $('drawing-line-width'),\r\n\tdrawingShadowWidth = $('drawing-shadow-width'),\r\n\tdrawingShadowOffset = $('drawing-shadow-offset'),\r\n\tclearEl = $('clear-canvas');\r\n\r\nclearEl.onclick = function() {\r\n\tcanvas.clear()\r\n};\r\n\r\ndrawingModeEl.onclick = function() {\r\n\tcanvas.isDrawingMode = !canvas.isDrawingMode;\r\n\tif (canvas.isDrawingMode) {\r\n\t\tdrawingModeEl.innerHTML = 'Cancel drawing mode';\r\n\t\tdrawingOptionsEl.style.display = '';\r\n\t} else {\r\n\t\tdrawingModeEl.innerHTML = 'Enter drawing mode';\r\n\t\tdrawingOptionsEl.style.display = 'none';\r\n\t}\r\n};\r\n\r\nif (fabric.PatternBrush) {\r\n\tvar vLinePatternBrush = new fabric.PatternBrush(canvas);\r\n\tvLinePatternBrush.getPatternSrc = function() {\r\n\r\n\t\tvar patternCanvas = fabric.document.createElement('canvas');\r\n\t\tpatternCanvas.width = patternCanvas.height = 10;\r\n\t\tvar ctx = patternCanvas.getContext('2d');\r\n\r\n\t\tctx.strokeStyle = this.color;\r\n\t\tctx.lineWidth = 5;\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(0, 5);\r\n\t\tctx.lineTo(10, 5);\r\n\t\tctx.closePath();\r\n\t\tctx.stroke();\r\n\r\n\t\treturn patternCanvas;\r\n\t};\r\n\r\n\tvar hLinePatternBrush = new fabric.PatternBrush(canvas);\r\n\thLinePatternBrush.getPatternSrc = function() {\r\n\r\n\t\tvar patternCanvas = fabric.document.createElement('canvas');\r\n\t\tpatternCanvas.width = patternCanvas.height = 10;\r\n\t\tvar ctx = patternCanvas.getContext('2d');\r\n\r\n\t\tctx.strokeStyle = this.color;\r\n\t\tctx.lineWidth = 5;\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(5, 0);\r\n\t\tctx.lineTo(5, 10);\r\n\t\tctx.closePath();\r\n\t\tctx.stroke();\r\n\r\n\t\treturn patternCanvas;\r\n\t};\r\n\r\n\tvar squarePatternBrush = new fabric.PatternBrush(canvas);\r\n\tsquarePatternBrush.getPatternSrc = function() {\r\n\r\n\t\tvar squareWidth = 10,\r\n\t\t\tsquareDistance = 2;\r\n\r\n\t\tvar patternCanvas = fabric.document.createElement('canvas');\r\n\t\tpatternCanvas.width = patternCanvas.height = squareWidth + squareDistance;\r\n\t\tvar ctx = patternCanvas.getContext('2d');\r\n\r\n\t\tctx.fillStyle = this.color;\r\n\t\tctx.fillRect(0, 0, squareWidth, squareWidth);\r\n\r\n\t\treturn patternCanvas;\r\n\t};\r\n\r\n\tvar diamondPatternBrush = new fabric.PatternBrush(canvas);\r\n\tdiamondPatternBrush.getPatternSrc = function() {\r\n\r\n\t\tvar squareWidth = 10,\r\n\t\t\tsquareDistance = 5;\r\n\t\tvar patternCanvas = fabric.document.createElement('canvas');\r\n\t\tvar rect = new fabric.Rect({\r\n\t\t\twidth: squareWidth,\r\n\t\t\theight: squareWidth,\r\n\t\t\tangle: 45,\r\n\t\t\tfill: this.color\r\n\t\t});\r\n\r\n\t\tvar canvasWidth = rect.getBoundingRect().width;\r\n\r\n\t\tpatternCanvas.width = patternCanvas.height = canvasWidth + squareDistance;\r\n\t\trect.set({\r\n\t\t\tleft: canvasWidth / 2,\r\n\t\t\ttop: canvasWidth / 2\r\n\t\t});\r\n\r\n\t\tvar ctx = patternCanvas.getContext('2d');\r\n\t\trect.render(ctx);\r\n\r\n\t\treturn patternCanvas;\r\n\t};\r\n\r\n\tvar img = new Image();\r\n\timg.src = '../assets/honey_im_subtle.png';\r\n\r\n\tvar texturePatternBrush = new fabric.PatternBrush(canvas);\r\n\ttexturePatternBrush.source = img;\r\n}\r\n\r\n$('drawing-mode-selector').onchange = function() {\r\n\r\n\tif (this.value === 'hline') {\r\n\t\tcanvas.freeDrawingBrush = vLinePatternBrush;\r\n\t} else if (this.value === 'vline') {\r\n\t\tcanvas.freeDrawingBrush = hLinePatternBrush;\r\n\t} else if (this.value === 'square') {\r\n\t\tcanvas.freeDrawingBrush = squarePatternBrush;\r\n\t} else if (this.value === 'diamond') {\r\n\t\tcanvas.freeDrawingBrush = diamondPatternBrush;\r\n\t} else if (this.value === 'texture') {\r\n\t\tcanvas.freeDrawingBrush = texturePatternBrush;\r\n\t} else {\r\n\t\tcanvas.freeDrawingBrush = new fabric[this.value + 'Brush'](canvas);\r\n\t}\r\n\r\n\tif (canvas.freeDrawingBrush) {\r\n\t\tcanvas.freeDrawingBrush.color = drawingColorEl.value;\r\n\t\tcanvas.freeDrawingBrush.width = parseInt(drawingLineWidthEl.value, 10) || 1;\r\n\t\tcanvas.freeDrawingBrush.shadow = new fabric.Shadow({\r\n\t\t\tblur: parseInt(drawingShadowWidth.value, 10) || 0,\r\n\t\t\toffsetX: 0,\r\n\t\t\toffsetY: 0,\r\n\t\t\taffectStroke: true,\r\n\t\t\tcolor: drawingShadowColorEl.value,\r\n\t\t});\r\n\t}\r\n};\r\n\r\ndrawingColorEl.onchange = function() {\r\n\tcanvas.freeDrawingBrush.color = this.value;\r\n};\r\ndrawingShadowColorEl.onchange = function() {\r\n\tcanvas.freeDrawingBrush.shadow.color = this.value;\r\n};\r\ndrawingLineWidthEl.onchange = function() {\r\n\tcanvas.freeDrawingBrush.width = parseInt(this.value, 10) || 1;\r\n\tthis.previousSibling.innerHTML = this.value;\r\n};\r\ndrawingShadowWidth.onchange = function() {\r\n\tcanvas.freeDrawingBrush.shadow.blur = parseInt(this.value, 10) || 0;\r\n\tthis.previousSibling.innerHTML = this.value;\r\n};\r\ndrawingShadowOffset.onchange = function() {\r\n\tcanvas.freeDrawingBrush.shadow.offsetX = parseInt(this.value, 10) || 0;\r\n\tcanvas.freeDrawingBrush.shadow.offsetY = parseInt(this.value, 10) || 0;\r\n\tthis.previousSibling.innerHTML = this.value;\r\n};\r\n\r\nif (canvas.freeDrawingBrush) {\r\n\tcanvas.freeDrawingBrush.color = drawingColorEl.value;\r\n\tcanvas.freeDrawingBrush.width = parseInt(drawingLineWidthEl.value, 10) || 1;\r\n\tcanvas.freeDrawingBrush.shadow = new fabric.Shadow({\r\n\t\tblur: parseInt(drawingShadowWidth.value, 10) || 0,\r\n\t\toffsetX: 0,\r\n\t\toffsetY: 0,\r\n\t\taffectStroke: true,\r\n\t\tcolor: drawingShadowColorEl.value,\r\n\t});\r\n}</code></pre></div>\n<p>})();\r\n</pre></p>\n</div>","frontmatter":{"title":"Free drawing"},"mdFile":{"relativePath":"demo/free-drawing/index.md"}}},"pageContext":{"title":"Free drawing","slug":"/demo/free-drawing","prev":{"title":"Events inspector","slug":"/demo/events-inspector"},"next":{"title":"HTML5 &lt;video&gt; element","slug":"/demo/html5-video-element"}}},"staticQueryHashes":["2748212769"],"slicesMap":{}}